-- ["Class"] = {0 = no spells, {numbers} = multiple spells for level, number = 1 spell for that level}
-- May include talent spells
local LevelUpData = {
	["Warrior"] = {6673, 0, {100, 772}, 0, 6343, 0, {6343, 284}, 0, {2687, 6546,
			674, 2458, 71}, 0, {7384, 5242, 6552, 72}, 0, {1160, 6572}, 0, {285,
			694, 2565}, 0, {8198, 676}, 0, {6547, 20230, 845, 20252, 12678}, 0,
			{6192, 5246}, 0, {6190, 5308, 1608, 6574}, 0, {1161, 6178}, 0,
			{871, 8204}, 0, {6548, 7369, 1464, 20252}},
	["Paladin"] = {465, 0, {19740, 20271}, 0, {639, 498}, 0, {1152, 853}, 0,
			{10290, 1022, 683, 50082}, 32203, {53408, 19834, 7328}, 0, {19742, 31789, 647}, 0,
			{7294, 25780, 62124}, 0, {1044, 31785}, 0, {26573, 879, 19750, 5502, 20217,
			643, 10290,31801}, 0, {16681, 16681, 19746, 1026}, 0, {10322, 10326, 5599,
			5588, 19850}, 0, {19939, 10298, 1038}, 0, {53407, 5614, 19876}, 0,
			{1042, 10291, 20116, 19752, 20165, 2800,19752}},
	["Hunter"] = {{1516, 1494, 982, 883, 6991}, 0, {1978, 13163}, 0, {3044, 1130,36562}, 0, {14260, 5116}, 0,
			{13165, 674, 19883, 1515, 2641, 13549}, 32203, {14281,
			2974, 20736}, 0, {6197, 1002, 1513}, 0, {13795, 5118, 1495, 14261}, 0,
			{14318, 2643, 19884, 13550}, 0, {34074, 3111, 14282, 781, 1499}, 0,
			1462, 0, 3661, 0, 14319, 0, {13161,34120, 14326, 19577}, 0, {3043, 14323}, 0,
			{19885, 1462, 14262}, 0, {19880, 13551, 3045, 14302}, 0, {3661, 13809,
			14319, 14283, 20900}, 0, {14269, 14288, 5384,53351, 14326,53270, 13161}},
	["Rogue"] = {1784, 0, {921, 53}, 0, {1776, 1757}, 0, {6760, 5277}, 0, {5171,
			2983, 6770}, 0, {2589, 1766}, 0, {1758, 703, 8647}, 0, {6761, 1966,
			1804, 50079}, 0, {8676, 50076}, {61329,23588}, {51722, 1943, 2590, 408}, 0,
			8631, 0, 6762, 0, {8724, 1833}, 0, 8639, 0, {8632, 408}},
	["Priest"] = {{1243}, 0, {2052, 589}, 0, {17, 591}, 0, {586, 139}, 0, {2053, 2006,
			8092, 594}, 32203, {1244, 592, 588}, 0, {528, 6074, 598, 8122}, 0, {2054,
			8102}, 0, {527, 600, 970}, 0, {6346, 7128, 9484, 2061, 14914, 15237,
			6075, 2944, 453}, 0, {8103, 2010, 984, 2096, 2055}, 0, {15262, 1245,
			3747, 8129}, 0, {6076, 19238, 992, 9472}, 0, {8104, 15430, 17311,
			6063, 19276, 8124}, 0, {976, 596, 6065, 602, 15263, 14752, 1004}},
	["Shaman"] = {{8017, 674}, 0, {8042, 3599, 8071}, 0, {2484, 332}, 0, 
			{8044, 529, 5730, 324, 8018}, 0, {8050, 8024, 8075, 8154}, 32203, {2008, 
			1535, 547, 370}, 0, {8045, 548}, 0, {57994, 526, 2645, 325, 8019},
			0, {8143, 8052, 6390, 8027, 913}, 0, {8056, 915, 6363, 8033, 8004,
			52127}, 0, {8498, 131}, 0, {10399, 8155, 8160, 20609, 8046, 939, 905,
			8181}, 0, {8190, 5675, 8030, 943, 6196, 36562}, 0, {52129, 546, 6391, 8008,
			8184, 8053, 8227, 8038}, 0, {20608, 556, 66842, 51730, 36936, 6375,
			8177, 10595, 8232, 6364}},
	["Mage"] = {1459, 0, {5504, 116}, 0, {2136, 587, 143}, 0, {5143, 118, 205},
			0, {5504, 7300, 122}, 0, {604, 145, 597, 130}, 32203, {1449, 1460, 2137,
			837}, 0, {2120, 5144}, 0, {1008, 3140, 475}, 0, {1953, 5506, 12051,
			1463, 12824, 543, 10, 7301, 7322}, 0, {8437, 2948, 6143, 2138, 990},
			0, {2139, 12505, 8400, 2121, 5145, 8450}, 0, {865, 8406, 120}, 0,
			{8494, 759, 6141, 1461, 8444}, 0, {12522, 45438, 7302, 8401, 8457,
			8412, 6127, 8438, 8455}},
	["Warlock"] = {{348, 688}, 0, {172, 702}, 0, {1454, 695}, 0, {980, 5782},
			0, {707, 696, 6201, 697, 1120}, 32203, {1108, 755, 705}, 0, {6222, 689}, 0,
			{5697, 1455}, 0, {693, 5676, 1014}, 0, {706, 3698, 698, 1094, 5740, 1088},
			0, {6202, 699, 6205}, 0, {18867, 5500, 8288, 5138, 6223}, 0, {132,
			1714, 17919, 1456}, 0, {710, 1106, 3699, 6366, 6217}, 0, {1949, 2941, 1098,
			20752, 709, 1086}},
	["Druid"] = {1126, 0, {774, 8921}, 0, {5177, 467}, 0, {768,339, 5186,1082}, 0, {5487,
			6807, 1066, 99, 8924, 5232, 1058, 16689}, {33876,33878}, {8936, 5229, 50769,32203}, 0,
			{5187, 5178, 782, 5211}, 0, {783, 779, 8925, 1430}, 0, {1062, 16810,
			2637, 770, 6808, 16857, 8938}, 0, {2912, 768, 1735, 5215, 1079,
			5188, 6756}, 0, {5179, 8926, 2908}, 0, {1075,1822,780,1850,5217,50768,1075}, 0, 8949, 0, {8927,1082,9492}, 0,
			{5201,5180,22568,740}},
	["Death Knight"] = {}, -- death knight is disabled
	["Demon Hunter"] = {0, 0, 0, 0, 0, 0, 0, 0, 0,{47524,32203},{50051,25531,50056},0,0,50047,0,0,{50046,33246,50057,50075},0,{20910,50049},0,{50058,19392},33247,{50050,49016},0,27067,0,0,0,50059}
}

function OnLevelUp(event, player)
	if not player then
		return
	end
	local level = player:GetPlayerLevel()
	local class = player:GetPlayerClass()
	local LevelUpSpells = LevelUpData[class][level-1] -- player spells start at level 2
	if (type(LevelUpSpells) == "number") then
		if LevelUpSpells ~= 0 then
			player:LearnSpell(LevelUpSpells)
		end
	else
		for _,v in pairs(LevelUpSpells) do
			player:LearnSpell(v)
		end
	end
	if (level == 4 and class == "Shaman") then
		if (not player:HasItem(5176)) then
			player:AddItem(5176, 1)
		end
		if (not player:HasItem(5178)) then
			player:AddItem(5178, 1)
		end
		if (not player:HasItem(5177)) then
			player:AddItem(5177, 1)
		end
		if (not player:HasItem(5175)) then
			player:AddItem(5175, 1)
		end
	elseif (level == 10 and class == "Paladin") then
		player:UnlearnSpell(465) -- devotion aura rank 1
	elseif (level == 20 and class == "Paladin") then
		player:UnlearnSpell(10290) -- devotion aura rank 2
	elseif (level == 26 and class == "Paladin") then
		player:UnlearnSpell(7294) -- retribution aura rank 1
	elseif (level == 30 and class == "Paladin") then
		player:UnlearnSpell(643) -- devotion aura rank 3
	elseif (level == 20 and class == "Demon Hunter" and player:HasSpell(16511)) then
		player:LearnSpell(17347)
	elseif (level == 22 and class == "Demon Hunter" and player:HasSpell(50052)) then
		--player:UnlearnSpell(50052)
		player:LearnSpell(50053)
	elseif (level == 26 and class == "Demon Hunter" and player:HasSpell(17347)) then
		player:LearnSpell(17348)
	elseif (level == 28 and class == "Demon Hunter" and player:HasSpell(50053)) then
		--player:UnlearnSpell(50053)
		player:LearnSpell(50054)
	elseif (level == 30 and class == "Demon Hunter" and player:HasSpell(17348)) then
		player:LearnSpell(26864)
	end
end

RegisterServerHook(27, "OnLevelUp")